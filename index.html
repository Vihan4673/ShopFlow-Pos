<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>POS-web</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="assets/Style.css" rel="stylesheet">

</head>
<body>
<!-- Login & Signup Section -->
<section id="auth-section" class="d-flex justify-content-center align-items-center vh-100">
    <div class="card p-4 auth-card text-center">
        <h3 class="mb-3">POS System</h3>
        <p class="text-muted" id="auth-msg">Please sign in to continue</p>

        <!-- LOGIN FORM -->
        <form id="login-form">
            <div class="mb-3">
                <input type="text" class="form-control" id="login-username" placeholder="Username" required>
            </div>
            <div class="mb-3">
                <input type="password" class="form-control" id="login-password" placeholder="Password" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-2">Login</button>
            <small>Don't have an account? <span id="showSignup" class="text-primary" style="cursor:pointer;">Sign Up</span></small>
        </form>

        <!-- SIGNUP FORM -->
        <form id="signup-form" style="display:none;">
            <div class="mb-3">
                <input type="text" class="form-control" id="signup-username" placeholder="Username" required>
            </div>
            <div class="mb-3">
                <input type="password" class="form-control" id="signup-password" placeholder="Password" required>
            </div>
            <div class="mb-3">
                <input type="password" class="form-control" id="signup-confirm-password" placeholder="Confirm Password" required>
            </div>
            <button type="submit" class="btn btn-success w-100 mb-2">Sign Up</button>
            <small>Already have an account? <span id="showLogin" class="text-primary" style="cursor:pointer;">Login</span></small>
        </form>
    </div>
</section>


<!-- Sidebar -->
<nav class="navbar-dark bg-dark" id="sidebar">
    <a class="navbar-brand text-center mb-3" href="#">POS</a>

    <!-- USER INFO -->
    <div class="text-center mb-2">
        <h5 id="username-display" class="text-white fw-bold mb-1">Welcome!</h5>

    </div>

    <!-- NAV LINKS -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link active" id="home_nav"><i class="fa-solid fa-house-chimney"></i> HOME</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="customer_nav"><i class="fa-solid fa-user-group"></i> CUSTOMER</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="item_nav"><i class="fa-solid fa-boxes-stacked"></i> ITEM</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="order_nav"><i class="fa-solid fa-cart-shopping"></i> ORDERS</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="orderDetail_nav"><i class="fa-solid fa-receipt"></i> ORDER DETAIL</a>
        </li>
    </ul>
    <button id="logoutButton" class="btn btn-danger btn-sm">
        <i class="fa-solid fa-right-from-bracket me-1"></i> Logout
    </button>
</nav>

<button class="navbar-toggler" type="button" id="sidebarToggleBtn">
    <span class="navbar-toggler-icon"></span>
</button>

<!-- CONTENT -->
<div id="contentWrapper">

    <!---------------------------- Home Section --------------------------------->
    <section id="homeSection" class="container-fluid py-5">
        <div class="container py-5">

            <!-- Header -->
            <div class="text-center mb-5 p-4 rounded-3 shadow-sm bg-white">
                <h1 class="display-4 fw-bold" style="color: var(--dark-bg);">Dashboard Overview</h1>
                <p class="lead text-muted mb-0">Quick summary of today's performance</p>
            </div>

            <!-- Dashboard Cards -->
            <div class="row g-4 justify-content-center">

                <!-- Total Orders -->
                <div class="col-xl-4 col-md-6">
                    <div class="card dashboard-card bg-primary text-white shadow-lg border-0 rounded-4">
                        <div class="card-body d-flex align-items-center p-4">
                            <i class="fas fa-shopping-cart fa-3x me-4"></i>
                            <div>
                                <div class="text-uppercase fw-bold opacity-75 small">Total Orders (Today)</div>
                                <h2 class="display-5 mb-0" id="dashboardOrderCount">0</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Active Customers -->
                <div class="col-xl-4 col-md-6">
                    <div class="card dashboard-card bg-success text-white shadow-lg border-0 rounded-4">
                        <div class="card-body d-flex align-items-center p-4">
                            <i class="fas fa-users fa-3x me-4"></i>
                            <div>
                                <div class="text-uppercase fw-bold opacity-75 small">Active Customers</div>
                                <h2 class="display-5 mb-0" id="dashboardCustomerCount">0</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Monthly Income -->
                <div class="col-xl-4 col-md-12">
                    <div class="card dashboard-card bg-warning text-dark shadow-lg border-0 rounded-4">
                        <div class="card-body d-flex align-items-center p-4">
                            <i class="fas fa-dollar-sign fa-3x me-4"></i>
                            <div>
                                <div class="text-uppercase fw-bold opacity-75 small">Monthly Income (LKR)</div>
                                <h2 class="display-5 mb-0" id="dashboardIncome">0</h2>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer note -->
            <div class="row mt-5">
                <div class="col-12 text-center text-muted">
                    <p class="mb-0">
                        Data updates automatically. Use the sidebar to manage inventory and transactions.
                    </p>
                </div>
            </div>

        </div>
    </section>


    <!------------------------------------------CUSTOMER SECTION-------------------------------------------------------->
    <main id="customerSection" class="container py-4">
        <div class="d-flex align-items-center mb-4">
            <i class="fa-solid fa-user-group fa-2x text-primary me-2"></i>
            <h1 class="h3 mb-0">Customers</h1>
        </div>

        <div class="row g-4">
            <!-- Customer Form Card -->
            <section class="col-12 col-lg-5">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Customer Details</h5>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label for="inputCustomerId" class="form-label">Customer ID</label>
                                <input type="text" class="form-control" id="inputCustomerId" readonly placeholder="Auto-generated">
                            </div>
                            <div class="mb-3">
                                <label for="inputCustomerName" class="form-label">Customer Name</label>
                                <input type="text" class="form-control" id="inputCustomerName" placeholder="Enter customer name">
                            </div>
                            <div class="mb-3">
                                <label for="inputAddress" class="form-label">Address</label>
                                <input type="text" class="form-control" id="inputAddress" placeholder="Enter address">
                            </div>
                            <div class="mb-3">
                                <label for="inputTelephoneNo" class="form-label">Telephone No</label>
                                <input type="text" class="form-control" id="inputTelephoneNo" placeholder="Enter phone number">
                            </div>

                            <div class="d-flex flex-wrap gap-2">
                                <button type="button" class="btn btn-success flex-fill" id="btn_save_customer">Save</button>
                                <button type="button" class="btn btn-primary flex-fill" id="btn_update_customer">Update</button>
                                <button type="button" class="btn btn-danger flex-fill" id="btn_delete_customer">Delete</button>
                                <button type="button" class="btn btn-secondary flex-fill" id="btn_clear_customer">Clear</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Customer Table Card with Single Search Bar -->
            <section class="col-12 col-lg-7">
                <div class="card shadow-sm">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">Search Customer</h5>
                    </div>
                    <div class="card-body">
                        <!-- Single Search Bar -->
                        <div class="mb-3">
                            <input type="text" class="form-control" id="customerSearch" placeholder="Search by Name or Telephone">
                        </div>

                        <!-- Customer Table -->
                        <div class="table-responsive">
                            <table class="table table-striped table-hover align-middle">
                                <thead class="table-light">
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Telephone</th>
                                </tr>
                                </thead>
                                <tbody id="customerTableBody">
                                <tr>
                                    <th scope="row">C001</th>
                                    <td>John Doe</td>
                                    <td>Colombo</td>
                                    <td>077-1234567</td>
                                </tr>
                                <tr>
                                    <th scope="row">C002</th>
                                    <td>Jane Smith</td>
                                    <td>Kandy</td>
                                    <td>071-9876543</td>
                                </tr>
                                <tr>
                                    <th scope="row">C003</th>
                                    <td>Bimal Perera</td>
                                    <td>Galle</td>
                                    <td>070-5554444</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!---------------------------------------------ITEM SECTION---------------------------------------------------------->
    <main id="itemSection" class="container py-4">
        <div class="d-flex align-items-center mb-4">
            <i class="fa-solid fa-gift fa-2x me-2"></i>
            <h1 class="mb-0">ITEM MANAGEMENT</h1>
        </div>

        <div class="row g-4">
            <!-- CRUD FORM SECTION -->
            <section class="card col-12 col-md-5 p-3 shadow-sm">
                <h5 class="mb-3">Manage Item</h5>
                <form>
                    <div class="mb-3">
                        <label for="inputItemId" class="form-label">Item Code</label>
                        <input type="text" class="form-control" id="inputItemId" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="inputItemDesc" class="form-label">Description</label>
                        <input type="text" class="form-control" id="inputItemDesc">
                    </div>
                    <div class="mb-3">
                        <label for="inputPrice" class="form-label">Unit Price</label>
                        <input type="number" class="form-control" id="inputPrice" min="0">
                    </div>
                    <div class="mb-3">
                        <label for="inputQty" class="form-label">Quantity</label>
                        <input type="number" class="form-control" id="inputQty" min="0">
                    </div>

                    <div class="d-flex justify-content-between flex-wrap gap-2">
                        <button type="button" class="btn btn-success flex-fill" id="btn_save_item">SAVE</button>
                        <button type="button" class="btn btn-primary flex-fill" id="btn_update_item">UPDATE</button>
                        <button type="button" class="btn btn-danger flex-fill" id="btn_delete_item">DELETE</button>
                        <button type="button" class="btn btn-secondary flex-fill" id="btn_clear_item">CLEAR</button>
                    </div>
                </form>
            </section>

            <!-- SEARCH & TABLE SECTION -->
            <section class="card col-12 col-md-6 p-3 shadow-sm">
                <h5 class="mb-3">Search & View Items</h5>

                <!-- SINGLE SEARCH BAR -->
                <input type="text" id="itemSearch" class="form-control mb-3" placeholder="Search by Code or Description">

                <!-- TABLE -->
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="itemTable">
                        <thead class="table-dark">
                        <tr>
                            <th scope="col">CODE</th>
                            <th scope="col">DESCRIPTION</th>
                            <th scope="col">PRICE</th>
                            <th scope="col">QTY</th>
                        </tr>
                        </thead>
                        <tbody id="itemTableBody">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-----------------------------------------ORDER SECTION------------------------------------------------------------>
    <main id="orderSection" class="container py-4">
        <div class="d-flex align-items-center mb-4">
            <i class="fa-solid fa-cart-shopping fa-2x me-2"></i>
            <h1 class="mb-0">PLACE ORDER</h1>
        </div>

        <div class="row g-4">
            <!-- LEFT SIDE: Invoice + Item Details -->
            <div class="col-12 col-lg-6">
                <!-- INVOICE DETAILS -->
                <div class="card shadow-sm p-3 mb-4">
                    <h5 class="mb-3">Invoice Details</h5>
                    <form>
                        <div class="row g-3">
                            <div class="col-6">
                                <label for="inputOrderId" class="form-label">Order Id</label>
                                <input type="text" class="form-control" id="inputOrderId" readonly>
                            </div>
                            <div class="col-6">
                                <label for="inputDate" class="form-label">Date</label>
                                <input type="date" class="form-control" id="inputDate">
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-6">
                                <label for="inputCustomerTelephone1" class="form-label">Customer Number</label>
                                <input type="text" class="form-control" id="inputCustomerTelephone1" placeholder="Enter number">
                            </div>
                            <div class="col-6">
                                <label for="inputCustomerName2" class="form-label">Customer Name</label>
                                <input type="text" class="form-control" id="inputCustomerName2" readonly placeholder="Auto-filled">
                            </div>
                        </div>
                    </form>
                </div>

                <!-- ITEM DETAILS -->
                <div class="card shadow-sm p-3">
                    <h5 class="mb-3">Item Details</h5>
                    <form>
                        <div class="row g-3">
                            <div class="col-6">
                                <label for="inputCode1" class="form-label">Item Code</label>
                                <select class="form-select" id="inputCode1">
                                    <option selected>Select code</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="inputDesc1" class="form-label">Description</label>
                                <input type="text" class="form-control" id="inputDesc1" readonly>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-6">
                                <label for="inputQtyOnHand" class="form-label">Qty On Hand</label>
                                <input type="text" class="form-control" id="inputQtyOnHand" readonly>
                            </div>
                            <div class="col-6">
                                <label for="inputUnitPrice" class="form-label">Unit Price</label>
                                <input type="text" class="form-control" id="inputUnitPrice" readonly>
                            </div>
                        </div>
                        <div class="row g-3 mt-2">
                            <div class="col-6">
                                <label for="inputOrderQty" class="form-label">Order Qty</label>
                                <input type="text" class="form-control" id="inputOrderQty">
                            </div>
                            <div class="col-6 d-grid align-self-end">
                                <button type="button" class="btn btn-primary w-100" id="btn_addCart">Add to Cart</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- RIGHT SIDE: Cart + Payment -->
            <div class="col-12 col-lg-6 d-flex flex-column gap-4">
                <!-- CART -->
                <div class="card shadow-sm p-3">
                    <h5 class="mb-3">Cart</h5>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">PRICE</th>
                                <th scope="col">QTY</th>
                                <th scope="col">TOTAL</th>
                                <th scope="col">REMOVE</th>
                            </tr>
                            </thead>
                            <tbody id="cartTableBody">

                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- PAYMENT -->
                <div class="card shadow-sm p-3">
                    <h5 class="mb-3">Payment</h5>
                    <form>
                        <div class="d-flex justify-content-between mb-3">
                            <label class="fw-bold text-success">Net Total: <span id="netTotal">1500.00</span></label>
                            <label class="fw-bold text-primary">Sub Total: <span id="subTotal">1500.00</span></label>
                        </div>

                        <div class="row g-3">
                            <div class="col-6">
                                <label for="inputDiscount" class="form-label">Discount</label>
                                <input type="text" class="form-control" id="inputDiscount" value="0">
                            </div>
                            <div class="col-6">
                                <label for="inputCash" class="form-label">Cash</label>
                                <input type="text" class="form-control" id="inputCash">
                            </div>
                        </div>

                        <div class="row g-3 mt-2">
                            <div class="col-6">
                                <label for="inputBalance" class="form-label">Balance</label>
                                <input type="text" class="form-control bg-light" id="inputBalance" readonly>
                            </div>
                            <div class="col-6 d-grid">
                                <button type="button" class="btn btn-success w-100" id="btn_placeOrder">Place Order</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-----------------------------------------ORDER DETAIL SECTION------------------------------------------------------------>
    <main id="orderDetailSection" class="container py-4">
        <div class="d-flex align-items-center mb-4">
            <i class="fa-solid fa-receipt fa-2x me-2"></i>
            <h1 class="mb-0">ORDER DETAILS</h1>
        </div>

        <div class="row g-4">
            <!-- ORDERS TABLE -->
            <section class="card col-12 col-lg-5 p-3 shadow-sm">
                <h5 class="mb-3">Orders</h5>

                <!-- SEARCH BAR -->
                <input type="text" id="orderSearch" class="form-control mb-3" placeholder="Search by Order ID or Customer ID">

                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="orderTable">
                        <thead class="table-dark">
                        <tr>
                            <th scope="col">ORDER ID</th>
                            <th scope="col">CUSTOMER ID</th>
                            <th scope="col">TOTAL</th>
                            <th scope="col">DATE</th>
                        </tr>
                        </thead>
                        <tbody id="orderTableBody">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ORDER ITEMS TABLE -->
            <section class="card col-12 col-lg-6 p-3 shadow-sm">
                <h5 class="mb-3">Order Items</h5>

                <!-- SEARCH BAR -->
                <input type="text" id="orderItemSearch" class="form-control mb-3" placeholder="Search by Order ID or Item ID">

                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="orderDetailsTable">
                        <thead class="table-dark">
                        <tr>
                            <th scope="col">ORDER ID</th>
                            <th scope="col">ITEM ID</th>
                            <th scope="col">QUANTITY</th>
                        </tr>
                        </thead>
                        <tbody id="orderDetailsTableBody"></tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

        </div>

    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="assets/lib/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script type="module" src="Controller/CustomerController.js"></script>
<script type="module" src="Controller/ItemController.js"></script>
<script type="module" src="Controller/OrderController.js"></script>
<script src="Controller/AuthController.js" type="module"></script>
<script src="Controller/NavigationController.js" type="module"></script>
<script type="module">
    import { DashboardController } from "./controller/DashboardController.js";

    window.addEventListener("DOMContentLoaded", () => {
        DashboardController.init();
    });

</script>

</body>
</html>
